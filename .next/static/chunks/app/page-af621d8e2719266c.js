(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{425:(e,t,a)=>{"use strict";a.d(t,{R:()=>s,j:()=>c});let r="/api",o=e=>{let t=new Headers,a=localStorage.getItem("token");return a&&t.append("Authorization","Bearer ".concat(a)),e&&t.append("Content-Type",e),t},n=async e=>{if(!e.ok){console.error("HTTP error! status: ".concat(e.status,", statusText: ").concat(e.statusText));let t="API Error: ".concat(e.status," ").concat(e.statusText);try{let a=e.headers.get("Content-Type");if(a&&a.includes("application/json")){let a=await e.json();console.log("Error response data:",a),t=a.message||a.error||t}else{let a=await e.text();console.log("Error response text:",a),t=a||t}}catch(e){console.error("Failed to parse error response:",e)}throw Error(t)}try{return await e.json()}catch(e){return console.error("Failed to parse success response as JSON:",e),{}}},s={register:async e=>n(await fetch("".concat(r,"/auth/register"),{method:"POST",body:e})),login:async(e,t)=>n(await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})),logout:async()=>n(await fetch("".concat(r,"/auth/logout"),{method:"POST",headers:o()})),getCurrentUser:async()=>n(await fetch("".concat(r,"/auth/me"),{headers:o()})),updateProfile:async e=>n(await fetch("".concat(r,"/auth/update-profile"),{method:"PUT",headers:o(),body:e})),changePassword:async e=>n(await fetch("".concat(r,"/auth/change-password"),{method:"PUT",headers:o("application/json"),body:JSON.stringify(e)}))},c={getAllCars:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e);return n(await fetch("".concat(r,"/cars?").concat(t.toString()),{headers:o()}))},getMyListings:async e=>n(await fetch("".concat(r,"/cars/dealer/").concat(e),{headers:o()})),getCarById:async e=>n(await fetch("".concat(r,"/cars/").concat(e),{headers:o()})),createCar:async e=>n(await fetch("".concat(r,"/cars/create"),{method:"POST",headers:o(),body:e})),updateCar:async(e,t)=>n(await fetch("".concat(r,"/cars/").concat(e),{method:"PUT",headers:o(),body:t})),deleteCar:async e=>n(await fetch("".concat(r,"/cars/").concat(e),{method:"DELETE",headers:o()})),updateCarStatus:async(e,t)=>{try{let a=await fetch("".concat(r,"/cars/").concat(e,"/status"),{method:"PUT",headers:o("application/json"),body:JSON.stringify({status:t})});return await n(a)}catch(e){throw e}}}},1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),o=a(2115),n=a(5695),s=a(3274),c=a(4631);function i(){let{user:e,loading:t}=(0,s.A)(),a=(0,n.useRouter)();return(0,o.useEffect)(()=>{t||(e?a.replace("/inventory"):a.replace("/login"))},[e,t,a]),(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)(c.A,{className:"w-8 h-8 animate-spin"})})}},2528:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))},2895:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2115),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let a=(0,r.forwardRef)((a,s)=>{let{color:c="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:h="",children:d,...y}=a;return(0,r.createElement)("svg",{ref:s,...o,width:i,height:i,stroke:c,strokeWidth:u?24*Number(l)/Number(i):l,className:["lucide","lucide-".concat(n(e)),h].join(" "),...y},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])});return a.displayName="".concat(e),a}},3274:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,AuthProvider:()=>c});var r=a(5155),o=a(2115),n=a(425);let s=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,o.useState)(null),[i,l]=(0,o.useState)(!0),[u,h]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{l(!0);let e=localStorage.getItem("currentUser");if(e)c(JSON.parse(e));else{let e=await n.R.getCurrentUser();c(e)}}catch(e){c(null)}finally{l(!1)}})()},[]);let d=async(e,t)=>{try{l(!0),h(null);let{token:a,...r}=await n.R.login(e,t);c(r),localStorage.setItem("token",a),console.log("token is :",a),localStorage.setItem("currentUser",JSON.stringify(r))}catch(e){throw h(e instanceof Error?e.message:"Failed to login"),e}finally{l(!1)}},y=async e=>{try{l(!0),h(null);let{token:t,...a}=await n.R.register(e);c(a),localStorage.setItem("token",t),localStorage.setItem("currentUser",JSON.stringify(a))}catch(e){throw h(e instanceof Error?e.message:"Failed to register"),e}finally{l(!1)}},f=async()=>{try{l(!0),h(null),await n.R.logout(),c(null),localStorage.removeItem("token"),localStorage.removeItem("currentUser")}catch(e){throw h(e instanceof Error?e.message:"Failed to logout"),e}finally{l(!1)}};return(0,r.jsx)(s.Provider,{value:{user:a,loading:i,error:u,login:d,register:y,logout:f},children:t})}function i(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4631:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2528)),_N_E=e.O()}]);