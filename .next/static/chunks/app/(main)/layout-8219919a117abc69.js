(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{425:(e,t,a)=>{"use strict";a.d(t,{R:()=>o,j:()=>l});let r="/api",s=e=>{let t=new Headers,a=localStorage.getItem("token");return a&&t.append("Authorization","Bearer ".concat(a)),e&&t.append("Content-Type",e),t},n=async e=>{if(!e.ok){console.error("HTTP error! status: ".concat(e.status,", statusText: ").concat(e.statusText));let t="API Error: ".concat(e.status," ").concat(e.statusText);try{let a=e.headers.get("Content-Type");if(a&&a.includes("application/json")){let a=await e.json();console.log("Error response data:",a),t=a.message||a.error||t}else{let a=await e.text();console.log("Error response text:",a),t=a||t}}catch(e){console.error("Failed to parse error response:",e)}throw Error(t)}try{return await e.json()}catch(e){return console.error("Failed to parse success response as JSON:",e),{}}},o={register:async e=>n(await fetch("".concat(r,"/auth/register"),{method:"POST",body:e})),login:async(e,t)=>n(await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})),logout:async()=>n(await fetch("".concat(r,"/auth/logout"),{method:"POST",headers:s()})),getCurrentUser:async()=>n(await fetch("".concat(r,"/auth/me"),{headers:s()})),updateProfile:async e=>n(await fetch("".concat(r,"/auth/update-profile"),{method:"PUT",headers:s(),body:e})),changePassword:async e=>n(await fetch("".concat(r,"/auth/change-password"),{method:"PUT",headers:s("application/json"),body:JSON.stringify(e)}))},l={getAllCars:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e);return n(await fetch("".concat(r,"/cars?").concat(t.toString()),{headers:s()}))},getMyListings:async e=>n(await fetch("".concat(r,"/cars/dealer/").concat(e),{headers:s()})),getCarById:async e=>n(await fetch("".concat(r,"/cars/").concat(e),{headers:s()})),createCar:async e=>n(await fetch("".concat(r,"/cars/create"),{method:"POST",headers:s(),body:e})),updateCar:async(e,t)=>n(await fetch("".concat(r,"/cars/").concat(e),{method:"PUT",headers:s(),body:t})),deleteCar:async e=>n(await fetch("".concat(r,"/cars/").concat(e),{method:"DELETE",headers:s()})),updateCarStatus:async(e,t)=>{try{let a=await fetch("".concat(r,"/cars/").concat(e,"/status"),{method:"PUT",headers:s("application/json"),body:JSON.stringify({status:t})});return await n(a)}catch(e){throw e}}}},2483:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(5155),s=a(2115),n=a(5695),o=a(3274),l=a(2895);let c=(0,l.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var i=a(7930);let d=(0,l.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=a(6874),u=a.n(h);function m(e){let{toggleSidebar:t}=e;return(0,r.jsxs)("header",{className:"h-16 bg-secondary fixed top-0 left-0 right-0 z-50 flex items-center px-4 shadow-md",children:[(0,r.jsx)("button",{onClick:t,className:"text-gray-300 hover:text-primary transition-colors mr-2 md:hidden",children:(0,r.jsx)(c,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-2",children:[(0,r.jsx)(i.A,{className:"w-8 h-8 text-primary"}),(0,r.jsx)("span",{className:"text-primary text-xl font-bold",children:"Carsawa"})]}),(0,r.jsx)("div",{className:"flex items-center ml-auto gap-4",children:(0,r.jsxs)(u(),{href:"/list-car",className:"bg-primary hover:bg-primary-hover text-black px-4 py-2 rounded-lg transition-colors flex items-center gap-2 font-medium shadow-sm",children:[(0,r.jsx)(d,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"List Your Car"})]})})]})}let y=(0,l.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),g=(0,l.A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),x=(0,l.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f=(0,l.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),p=(0,l.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w=(0,l.A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),v=(0,l.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var b=a(3999),j=a(425);let k=[{name:"Dashboard",href:"/dashboard",icon:y},{name:"Inventory",href:"/inventory",icon:g}];function N(e){let{isCollapsed:t,toggleCollapse:a,toggleButtonRef:o}=e,l=(0,n.useRouter)(),c=(0,n.usePathname)(),[i,d]=(0,s.useState)({name:"Loading...",profileImage:"/default-avatar.png"});(0,s.useEffect)(()=>{(async()=>{try{let e=await j.R.getCurrentUser();d({name:e.name,profileImage:e.profileImage})}catch(e){console.error("Failed to fetch profile:",e)}})()},[]);let h=async()=>{try{await j.R.logout(),localStorage.removeItem("token"),localStorage.removeItem("currentUser"),l.push("/login")}catch(e){console.error("Failed to logout:",e)}};return(0,r.jsxs)("div",{className:(0,b.cn)("bg-secondary min-h-screen fixed left-0 top-0 pt-16 shadow-lg transition-all duration-300 z-10",t?"w-20":"w-64","md:translate-x-0","transform","md:block"),children:[(0,r.jsx)("div",{ref:o,className:"absolute right-0 top-20 bg-secondary rounded-r-md p-1 cursor-pointer hidden md:block",onClick:a,children:t?(0,r.jsx)(x,{className:"w-4 h-4 text-gray-300"}):(0,r.jsx)(f,{className:"w-4 h-4 text-gray-300"})}),(0,r.jsxs)("div",{className:(0,b.cn)("flex flex-col items-center px-4 py-6 border-b border-gray-700",t?"px-2":"px-4"),children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:i.profileImage||"/default-avatar.png",alt:"Dealer avatar",className:"w-12 h-12 rounded-full object-cover border-2 border-primary"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 bg-green-500 w-3 h-3 rounded-full border-2 border-secondary"})]}),!t&&(0,r.jsxs)("div",{className:"mt-3 text-center",children:[(0,r.jsx)("h3",{className:"text-primary font-medium",children:i.name}),(0,r.jsxs)(u(),{href:"/profile",className:"mt-3 text-xs text-gray-300 hover:text-primary flex items-center justify-center gap-1",children:[(0,r.jsx)(p,{className:"w-3 h-3"}),"Manage Profile"]})]})]}),(0,r.jsx)("nav",{className:(0,b.cn)("mt-6",t?"px-2":"px-4"),children:k.map(e=>{let a=c===e.href;return(0,r.jsxs)(u(),{href:e.href,className:(0,b.cn)("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors mb-1","hover:bg-secondary-light",t?"justify-center px-2":"px-4",a?"text-primary bg-secondary-light":"text-gray-300"),title:t?e.name:"",children:[(0,r.jsx)(e.icon,{className:"w-5 h-5"}),!t&&e.name]},e.name)})}),(0,r.jsxs)("div",{className:"mt-auto px-4 pb-6 absolute bottom-0 left-0 right-0",children:[(0,r.jsxs)(u(),{href:"/profile",className:(0,b.cn)("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors mb-1","hover:bg-secondary-light text-gray-300",t?"justify-center px-2":"px-4"),title:t?"Profile":"",children:[(0,r.jsx)(w,{className:"w-5 h-5"}),!t&&"Profile"]}),(0,r.jsxs)("button",{onClick:h,className:(0,b.cn)("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full","hover:bg-secondary-light text-gray-300",t?"justify-center px-2":"px-4"),title:t?"Logout":"",children:[(0,r.jsx)(v,{className:"w-5 h-5"}),!t&&"Logout"]})]})]})}function S(e){let{children:t}=e,[a,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),c=(0,s.useRef)(null),i=(0,s.useRef)(null),d=()=>{n(!a),localStorage.setItem("sidebarCollapsed",String(!a))},h=()=>{o&&l(!1)};return(0,s.useEffect)(()=>{let e=localStorage.getItem("sidebarCollapsed");null!==e&&n("true"===e)},[]),(0,s.useEffect)(()=>{let e=e=>{let t=e.target;!a&&window.innerWidth>=768&&c.current&&!c.current.contains(t)&&i.current&&!i.current.contains(t)&&(n(!0),localStorage.setItem("sidebarCollapsed","true")),o&&window.innerWidth<768&&c.current&&!c.current.contains(t)&&h()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a,o]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)(m,{toggleSidebar:()=>{l(!o)}}),(0,r.jsx)("div",{className:"hidden md:block",ref:c,children:(0,r.jsx)(N,{isCollapsed:a,toggleCollapse:d,toggleButtonRef:i})}),(0,r.jsx)("div",{ref:c,className:"md:hidden fixed inset-y-0 left-0 z-40 transition-transform transform ".concat(o?"translate-x-0":"-translate-x-full"),style:{width:"80%",maxWidth:"300px"},children:(0,r.jsx)(N,{isCollapsed:!1,toggleCollapse:d,toggleButtonRef:i})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden","aria-hidden":"true"}),(0,r.jsx)("main",{className:"transition-all duration-300 pt-16 ".concat(a?"md:pl-20":"md:pl-64"),children:(0,r.jsx)("div",{className:"p-6 md:p-8",children:t})})]})}function C(e){let{children:t}=e,{user:a,loading:l}=(0,o.A)(),c=(0,n.useRouter)();return((0,s.useEffect)(()=>{l||a||c.push("/login")},[a,l,c]),l)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary"})}):a?(0,r.jsx)(S,{children:t}):null}},3274:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>l});var r=a(5155),s=a(2115),n=a(425);let o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)(null),[c,i]=(0,s.useState)(!0),[d,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{i(!0);let e=localStorage.getItem("currentUser");if(e)l(JSON.parse(e));else{let e=await n.R.getCurrentUser();l(e)}}catch(e){l(null)}finally{i(!1)}})()},[]);let u=async(e,t)=>{try{i(!0),h(null);let{token:a,...r}=await n.R.login(e,t);l(r),localStorage.setItem("token",a),console.log("token is :",a),localStorage.setItem("currentUser",JSON.stringify(r))}catch(e){throw h(e instanceof Error?e.message:"Failed to login"),e}finally{i(!1)}},m=async e=>{try{i(!0),h(null);let{token:t,...a}=await n.R.register(e);l(a),localStorage.setItem("token",t),localStorage.setItem("currentUser",JSON.stringify(a))}catch(e){throw h(e instanceof Error?e.message:"Failed to register"),e}finally{i(!1)}},y=async()=>{try{i(!0),h(null),await n.R.logout(),l(null),localStorage.removeItem("token"),localStorage.removeItem("currentUser")}catch(e){throw h(e instanceof Error?e.message:"Failed to logout"),e}finally{i(!1)}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:c,error:d,login:u,register:m,logout:y},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3551:(e,t,a)=>{Promise.resolve().then(a.bind(a,2483))},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},7930:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[508,277,441,684,358],()=>t(3551)),_N_E=e.O()}]);